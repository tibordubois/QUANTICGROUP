import pyAgrum as gum
import quantik as gqt

# quantik.py
class qBN:
    def __init__(self,bn):
        self.bn=bn
        self.binarizeVaraibles()
        ....
        
    def toqiskit(self):
        """
        create a circuit ...
        """
        ....

class qMonteCarlo:
    

class qRejectSampling:
    def init__(self,bn):
        ...
    def toqiskit(self):
        ...
        

# From BN to QC
bn=gum.fastBN('A->B{yes|no}->C',5)

#for v in bn.names():
#  print(bn[v])
#  print(bn[v].domainSize())
#  print(bn.cpt(v))

qbn=qgt.qBN(bn)
print(qbn.qbytes())
circuit=qbn.toqiskit()

bn= exemple de l"article
bn=gum.fastBN("A->T->TorC->Xray;S->C->ToC->D<-B<-S")
bn.cpt("A").fillWith([0.01,0.99])

qbn=qgt.qBN(bn)
circuit=qbn.toqiskit()
asser(circuit ressemble bien Ã  celui de l article)

#premier  test
p1=circuit.run().posterior("A")

ie=gum.LazyPropagation(bn)
ie.makeInference()
p2=ie.posterior("A")

assert(p1==p2)


qie = qgt.qRejectSampling(bn)
qie.addEvidence("C",3)
qie.setEpsilon(1e-5)
qie.setTimeout(5)
cinference=qie.toqiskit()

